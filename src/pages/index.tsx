import Head from "next/head";
import styles from "../styles/Home.module.css";
import Link from "next/link";
import { Club } from "contentlayer/generated";
import styled from "@emotion/styled";
import {
	Container,
	Text,
	Heading,
	Box,
	Flex,
	Button,
	Spacer,
	Input,
	InputGroup,
	InputRightElement,
	Center,
	Image,
	Modal,
	ModalBody,
	ModalCloseButton,
	ModalContent,
	VStack,
	ModalFooter,
	ModalHeader,
	ModalOverlay,
	useDisclosure,
} from "@chakra-ui/react";
import NavBar from "src/components/NavBar";
import ClubCard from "src/components/ClubCard";
import Footer from "src/components/Footer";
import CurveBackground from "src/components/CurveBackground";
import { Swiper, SwiperSlide } from "swiper/react";
import { Autoplay, EffectCoverflow } from "swiper";
import "swiper/css";
import Layout from "src/components/layout";

export default function Home() {
	return (
		<>
			<Layout>
				<Head>
					<title>Create Next App</title>
					<meta name="description" content="Generated by create next app" />
					<link rel="icon" href="/favicon.ico" />
				</Head>

				<Container maxWidth="95rem">
					<Flex mb="1.4rem">
						<Heading color="white" fontWeight="500">
							Find your place where your
							<Text fontWeight="bold">heart beats</Text>
						</Heading>
						<Spacer />
						<GuildsModal />
					</Flex>

					<StyledSlideShow loop>
						<SwiperSlide>
							<Image
								src="/sample_club_images/img1.jpg"
								alt="slide 1"
								objectFit="fill"
								h="100%"
								w="100%"
							/>
						</SwiperSlide>
						<SwiperSlide>
							<Image
								src="/sample_club_images/img2.jpg"
								alt="slide 1"
								objectFit="cover"
							/>
						</SwiperSlide>
						<SwiperSlide>
							<Image
								src="/sample_club_images/img3.jpg"
								alt="slide 1"
								objectFit="cover"
							/>
						</SwiperSlide>
					</StyledSlideShow>

					<Image
						src="/girl.png"
						pos="absolute"
						left="0"
						zIndex="-1"
						alt="girl"
						h={["100px", "400px", "700px"]}
						top="55rem"
					/>

					<Center
						mt="200"
						color="#555555"
						fontWeight="bold"
						flexDirection="column"
					>
						<Heading fontSize="53">Find and join existing clubs</Heading>
						<SearchBar />

						<Flex
							wrap="wrap"
							columnGap="1rem"
							rowGap="1rem"
							my="10rem"
							justifyContent="center"
						>
							<ClubCard />
							<ClubCard />
							<ClubCard />
							<ClubCard />
						</Flex>
					</Center>
				</Container>

				<Footer />
			</Layout>
		</>
	);
}

function fetchClubData(error: any, clubs: Club[]) {
	return (
		<div className={styles.clubs}>
			{error && <h1>Fetch error</h1>}

			{!clubs && !error && <h1>Loading</h1>}

			{clubs &&
				clubs.map((club) => (
					<div key={club._id} className={styles.club}>
						<Link href={club.url}>
							<a className={styles.card}>
								=
								<div className={styles.card_header}>
									=<h2>{club.name}</h2>
									<p>{club.description?.short ?? ""}</p>
								</div>
							</a>
						</Link>
					</div>
				))}
		</div>
	);
}

function SearchBar() {
	return (
		<InputGroup width="47rem" size="lg" borderColor="black">
			<Input
				placeholder={"Search for a club"}
				p="9"
				borderRadius="0"
				borderWidth="4px"
				boxShadow="-7px 7px black"
			/>
			<InputRightElement w="13rem" h="100%">
				<Button
					h="100%"
					w="100%"
					borderRadius="0"
					borderWidth="4px"
					borderColor="black"
					bg="#0057ff"
					color="white"
				>
					Search
				</Button>
			</InputRightElement>
		</InputGroup>
	);
}

function SlideShow() {
	return (
		<Box
			h="592px"
			bg="lightgray"
			pos="relative"
			color="white"
			borderWidth="6px"
			borderRadius="50px"
			borderColor="black"
			shadow="47px 47px #7a97ff"
		/>
	);
}

const StyledSlideShow = styled(Swiper)`
	height: 592px;
	background-color: lightgray;
	position: relative;
	color: white;
	border-width: 6px;
	border-radius: 50px;
	border-color: black;
	box-shadow: 47px 47px #7a97ff;
`;

function GuildsModal() {
	const { isOpen, onOpen, onClose } = useDisclosure();
	return (
		<>
			<Button
				bg="#F2779A"
				color="white"
				px="55"
				py="25"
				borderRadius="0"
				borderWidth="4px"
				borderColor="black"
				boxSizing="border-box"
				onClick={onOpen}
			>
				What is Guilds
			</Button>

			<Modal isOpen={isOpen} onClose={onClose}>
				<ModalOverlay />
				<ModalContent
					border="10px solid black"
					borderRadius="50px"
					p="10"
					maxW="60rem"
					bg="#FFECEC"
				>
					<ModalCloseButton
						_hover={{
							background: "red",
							color: "white",
							borderRadius: "50%",
						}}
						borderRadius="50%"
						fontSize="15px"
						m="1rem"
					/>
					<Flex>
						<Box
							h="30rem"
							w="30rem"
							boxShadow="10px 10px 0px black"
							borderRadius="50px"
							border="10px solid black"
							bg="#0057ff"
						></Box>

						<VStack alignItems="flex-end">
							<ModalBody ml="3rem">
								<Heading fontWeight="500" fontSize="30">
									What is Guilds?
								</Heading>
								<Text
									fontFamily="Space Grotesk"
									fontSize="50"
									fontWeight="bold"
								>
									Discover your Interests
								</Text>
								lorem ipsum dolor sit amet
							</ModalBody>
							<ModalFooter>
								<Button
									// p="1.2rem"
									px="7rem"
									py="2rem"
									boxShadow="5px 5px 0px black"
									borderRadius="0px"
									bg="#F2779A"
									color="white"
									fontFamily="Montserrat"
									border="3px solid black"
								>
									Next
								</Button>
							</ModalFooter>
						</VStack>
					</Flex>
				</ModalContent>
			</Modal>
		</>
	);
}
